# item10. equals는 일반 규약을 지켜 재정의하라

-   `equals()`를 재정의할 땐 반드시 **5가지 규약**을 지켜야 함
-   이를 지키지 않으면 컬렉션(Set, Map) 등에서 **이상한 버그**가 발생할 수 있음

### equals 일반 규약 (자바 명세)

| 성질            | 의미                                                              |
| --------------- | ----------------------------------------------------------------- |
| **반사성**      | `x.equals(x)`는 항상 `true`여야 함                                |
| **대칭성**      | `x.equals(y)`이면 `y.equals(x)`도 `true`여야 함                   |
| **추이성**      | `x.equals(y)`이고 `y.equals(z)`이면 `x.equals(z)`도 `true`여야 함 |
| **일관성**      | 여러 번 호출해도 결과가 항상 같아야 함 (입력 불변 시)             |
| **null-비허용** | `x.equals(null)`은 항상 `false`여야 함                            |

---

### equals를 재정의하면 안 되는 경우

-   식별성 기반 클래스: Thread, Socket, Database Connection 등

### equals 재정의 시 함께 해야하는 것

-   반드시 hashCode()도 같이 재정의해야 함
-   equals()가 참이면 hashCode()도 같아야 함 (그렇지 않으면 HashMap, HashSet에서 동작이 깨짐)

### 복잡하게 해결하려 하지 않아도 됨

-   필드들의 동치성만 검사해도 equals 규약을 어렵지 않게 지킬 수 있음
-   대부분 Object의 equals가 비교를 잘 수행해주기 때문에 필요한 경우가 아니면 재정의하지 말 것
-   잘 되어있는데 대다수의 IDE에 생성을 맡기는 편이 나음
