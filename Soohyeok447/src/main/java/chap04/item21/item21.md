# item21. 인터페이스는 구현하는 쪽을 생각해 설계하라

### 인터페이스를 배포하고나서는 수정하기가 거의 불가능함

-   디폴트 메서드를 사용하면 기존 구현체를 깨뜨리지 않고 기능을 추가할 수 있지만 만능은 아님
-   따라서 인터페이스는 반드시 신중하게 설계하고 철저히 테스트한 후 배포해야 함

### 왜 인터페이스 변경이 어려운데?

인터페이스에 새로운 메서드를 추가하면 그 인터페이스를 구현한 모든 클래스에서 컴파일 오류가 발생함.
<br>
세상에 공개된 수많은 구현 클래스들을 모두 수정하는 것은 현실적으로 불가능
<br>

### 디폴트 메서드의 등장

기존 인터페이스 구현체들을 깨뜨리지 않고 안전하게 인터페이스를 확장하려고 등장함

-   Java 8에서는 이러한 문제를 해결하기 위해 **디폴트 메서드**가 도입됨
-   인터페이스에 default 키워드를 붙여 메서드를 선언하면, 메서드 구현체까지 포함할 수 있음
-   디폴트 메서드를 사용하면 인터페이스에 새로운 기능을 추가해도, 이 인터페이스를 구현한 기존 클래스들은 디폴트 구현을 물려받게 되니까 그대로 컴파일됨

### 디폴트 메서드의 한계와 위험성

인터페이스 설계자는 모든 구현 클래스의 내부 사정을 알 수 없음

-   디폴트 메서드는 컴파일에 성공하더라도 기존 구현체에 런타임 오류를 일으킬 수 있음
-   고로 기존 인터페이스에 디폴트 메서드로 새 메서드를 추가하는 일은 꼭 필요한 경우가 아니면 피해야 함
-   디폴트 메서드는 인터페이스로부터 메서드를 제거하거나 기존 메서드의 시그니처를 수정하는 용도가 아님을 명심해야 함

### 인터페이스 설계 지침

-   인터페이스는 한 번 공개되면 수정이 거의 불가능하다는 사실을 명심해야 하고 매우 신중히 설계해야함
-   인터페이스를 공개하기 전에, 최소 3개 이상의 구현체를 직접 만들어보며 철저히 테스트를 해야 함

### 정리

-   디폴트 메서드는 땜빵이라고 생각하고 인터페이스 설계를 신중히 해야함
