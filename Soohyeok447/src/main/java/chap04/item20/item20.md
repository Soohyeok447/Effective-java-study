# item20. 추상 클래스보다는 인터페이스를 우선하라

#### 다중 구현용 타입으로는 인터페이스를 최우선으로 고려할 것

-   자바는 다중 구현 메커니즘으로 인터페이스와 추상 클래스를 제공함

#### 인터페이스 vs 추상 클래스

-   추상 클래스가 정의한 타입을 구현하는 클래스는 반드시 추상 클래스의 하위 클래스가 되어야 함
    -   자바는 단일 상속만 지원해서 확장성에 제약을 줌
-   인터페이스는 여러개를 구현할 수 있어서 더 유연함

### 인터페이스를 우선해서 고려해봐야하는 이유

#### 기존 클래스에도 손쉽게 새로운 인터페이스를 구현해넣을 수 있음

추상 클래스는 하나의 클래스만 상속가능한데 인터페이스는 여러 개를 클래스 선언에 implements 구문으로 추가하면 됨

#### 믹스인 구현에 안성맞춤임

-   믹스인은 클래스의 원래의 주된 타입외에도 추가적으로 선택적인 행위를 정의하는 타입.
-   대상 타입의 주된 기능에 선택적 기능을 혼합한다고 해서 믹스인이라고 함
-   클래스는 두 부모를 상속불가능하기 때문에 인터페이스가 더 믹스인을 구현하기에 맞는 도구

#### 계층구조가 없는 타입 프레임워크를 만들 수 있음

인터페이스를 활용하면 클래스들을 하나의 거대한 계층구조로 묶지 않고도 유연한 타입 시스템을 구축할 수 있음

```java
public interface Singer {
    AudioClip sing(Song s);
}

public interface Songwriter {
    Song compose(int chartPosition);
}
```

이 두 인터페이스를 조합해서 SingerSongwriter라는 새로운 인터페이스를 만들 수 있음 <br><br>
필요에 따라서는 클래스가 Singer와 Songwriter 모두를 구현해도 문제되지 않음 <br>

```java
public interface SingerSongwriter extends Singer, Songwriter {
    AudioClip strum();
    void actSensitive();
}
```

모두를 확장하고 새로운 제3의 인터페이스를 정의할 수도 있음

### 인터페이스와 디폴트 메서드 (자바 8에 추가됨)

인터페이스의 메서드 중 구현 방법이 명백한 것이 있다면, 그 구현을 디폴트 메서드로 제공해서 일감을 덜어줄 수 있음 (구현체까지 함께 제공)
<br><br>
디폴트 메서드를 제공할 때는 상속하려는 사람을 위한 설명을 @implSpec 자바독 태그를 붙여서 문서화 해야함

### 추상 골격 구현 (Skeletal Implementation)

-   인터페이스와 추상 클래스의 장점을 모두 취하는 방법
-   타입 정의는 인터페이스로 (필요하면 디폴트 메서드 몇 개도 함께 제공)
-   골격 구현 클래스는 나머지 메서드들까지 구현
-   이렇게 해두면 단순히 골격 구현을 확장하는 것만으로 이 인터페이스를 구현하는 데 필요한 일이 대부분 완료됨 (템플릿 메서드 패턴)
-   관례상 골격 구현 클래스 이름은 AbstractInterface로 지음

### 정리

-   타입을 정의할 때는 먼저 인터페이스를 고려할 것
-   필요하다면 디폴트 메서드를 통해 일부 구현을 제공할 것
-   그것으로 부족할 때만 골격 구현 추상 클래스를 함께 제공하는 방식을 고려할 것
