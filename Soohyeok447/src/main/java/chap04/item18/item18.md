# item18. 상속보다는 컴포지션을 사용하라

-   상속은 코드 재사용의 강력한 수단
-   캡슐화를 깨뜨리고 유연하지 못한 설계를 초래할 수 있으므로 무분별한 사용은 위험
-   대부분 상속 대신 컴포지션과 포워딩을 함께 사용하는 것이 더 견고하고 유연함

### 상속 문제점

-   상위 클래스 구현이 바뀌면 하위 클래스 동작에 예기치 못한 영향을 줄 수 있음 (쉽게 망가질 수 있음)

### 대안 (컴포지션 - 포워딩)

-   컴포지션: 새 클래스를 만들고 기존 클래스를 private 필드로 참조하는 방식
-   포워딩: 새 클래스의 메서드가 기존 클래스의 메서드를 호출해서 결과를 반환하는 방식

### 정리

-   extends 상속은 하위클래스가 상위 클래스의 '진짜' 하위 타입인 상황에만 쓰여야 한다.
    -   클래스 A를 상속하는 클래스 B를 작성할 때 "B가 정말 A인가?"자문해봐야 함 그렇다고 확신할 수 없다면 B는 A를 상속해서는 안된다 (명확한 subtype인 경우에만)
-   상속은 강력하지만 캡슐화를 해침
-   상속은 상위 클래스와 하위 클래스가 순수한 is-a 관계일 때만 써야 함
-   상속의 취약점을 피하려면 상속대신 컴포지션과 전달을 사용할 것
-   부모 클래스를 변경 할 때 자식 클래스에 영향이 감
