## Item 24: 멤버 클래스는 되도록 static으로 만들라

**중첩 클래스(nested class)**는 자신을 감싼 바깥 클래스 안에서만 써야하는 클래스다. 캡슐화를 높이고 코드를 더 읽기 쉽게 만들어준다. 중첩 클래스에는 네 가지 종류가 있어 각각의 쓰임새가 다르므로 상황에 맞게 사용해야 한다.

---

### 중첩 클래스의 네 종류

1. **정적 멤버 클래스**
2. **(비정적) 멤버 클래스**
3. **익명 클래스**
4. **지역 클래스**

이 중 첫 번째인 **정적 멤버 클래스**를 제외한 나머지 셋은 **내부 클래스(inner class)**에 해당한다.

---

### 1. 정적 멤버 클래스 (Static Member Class)

**가장 기본적이고 널리 쓰이는 중첩 클래스다.** 바깥 클래스의 **private** 멤버를 포함한 모든 멤버에 접근할 수 있지만, 이름 그대로 `static`이기 때문에 바깥 클래스의 인스턴스와는 독립적으로 존재한다.

**특징:**

- 바깥 클래스의 인스턴스를 참조하지 않는다.
- 다른 `static` 멤버와 똑같은 접근 규칙을 적용받는다.
- 주로 바깥 클래스와 함께 쓰이는 **public 도우미 클래스**로 사용된다.

**언제 사용하는가?**

- 중첩 클래스의 인스턴스가 바깥 인스턴스와 **독립적으로 존재**해야 할 때 사용한다.
- 바깥 인스턴스에 접근할 필요가 없다면 **무조건 `static`으로 만들어야 한다.** `static`을 붙이지 않으면 불필요한 참조가 생겨 메모리 누수나 성능 저하의 원인이 될 수 있다.

---

### 2. (비정적) 멤버 클래스 (Non-static Member Class)

`static`이 붙지 않은 멤버 클래스로 정적 멤버 클래스와의 가장 큰 차이점은 **바깥 클래스의 인스턴스를 암묵적으로 참조**한다는 것이다. 이 참조를 통해 바깥 인스턴스의 메서드를 호출하거나 필드를 사용할 수 있다.

**특징:**

- 바깥 인스턴스 없이는 생성될 수 없다. (`클래스명.this`로 바깥 인스턴스 참조)
- 주로 **어댑터를** 정의할 때 사용된다. 어떤 클래스의 인스턴스를 감싸 다른 클래스의 인스턴스처럼 보이게 하는 **뷰 역할**을 한다. (**예시:** Map 인터페이스의 keySet, entrySet)

---

### 3. 익명 클래스 (Anonymous Class)

이름이 없는 클래스로 선언과 동시에 인스턴스화된다. 응용하는데 제약이 많은 편이다.

**특징:**

- 이름이 없으므로 인스턴스는 선언한 지점에서만 만들 수 있다.
- `instanceof` 검사나 클래스 이름이 필요한 작업은 할 수 없다.
- 여러 인터페이스를 구현하거나 클래스를 상속하면서 동시에 다른 인터페이스를 구현할 수 없다.
- 표현식 중간에 등장하므로 짧지 않으면 가독성이 떨어진다.
- **람다(lambda)가 등장하면서 거의 다 람다로 대체되었다.**

**언제 사용하는가?**

- 작은 **함수 객체**나 **처리 객체(process object)**를 만드는 데 사용했다.
- **정적 팩터리 메서드**를 구현할 때 사용되었다.

---

### 4. 지역 클래스 (Local Class)

네 가지 중첩 클래스 중 가장 드물게 사용된다. 지역 변수처럼 실질적으로 어디서든 선언할 수 있고 해당 범위 안에서만 사용할 수 있다.

**특징:**

- 멤버 클래스처럼 이름이 있고 반복해서 사용할 수 있다.
- 익명 클래스처럼 비정적 문맥에서 사용될 때만 바깥 인스턴스를 참조할 수 있다.
- 정적 멤버는 가질 수 없으며 가독성을 위해 짧게 작성해야 한다.

---

### 요약

- **바깥 인스턴스에 접근할 필요가 없다면 `static`을 붙여 정적 멤버 클래스로 만들어라.**
- 멤버 클래스의 인스턴스가 바깥 인스턴스를 참조해야 할 때 **비정적 멤버 클래스**를 사용해라.
- 중첩 클래스가 한 메서드 안에서만 쓰이면서 그 인스턴스를 만드는 지점이 단 한 곳이고 해당 타입으로 쓰기에 적합한 클래스나 인터페이스가 이미 있다면 **람다**나 **익명 클래스**로 만들어라.
- 그 외의 경우에는 **지역 클래스**로 만들자.
