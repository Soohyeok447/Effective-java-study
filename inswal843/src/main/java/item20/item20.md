## Item 20: 추상 클래스보다는 인터페이스를 우선하라

자바는 **인터페이스**와 **추상 클래스**라는 두 가지 메커니즘을 통해 다중 구현을 지원한다. 자바 8부터 인터페이스에 **디폴트 메서드(default method)**가 추가되어 두 메커니즘 모두 구현을 포함할 수 있게 되었다.

---

### 1. 인터페이스와 추상 클래스의 차이점

- **확장 vs 구현:** 자바는 단일 상속만 지원해 추상 클래스를 확장한 클래스는 다른 클래스를 상속할 수 없다 . 하지만 인터페이스는 개수 제한 없이 구현할 수 있어 훨씬 유연하다.

---

### 2. 인터페이스를 우선해야 하는 이유

1. **기존 클래스에 쉽게 새로운 기능을 추가할 수 있다.**
    
    Comparable, Iterable, AutoCloseable 같은 인터페이스는 이미 다른 클래스를 상속 중인 클래스에도 쉽게 구현할 수 있다. 추상 클래스였다면 불가능했을 것이다.
    
2. **믹스인(mixin) 정의에 안성맞춤이다.**
    
    믹스인이란 클래스가 구현할 수 있는 타입으로, ‘주된 타입’에 더해 선택적인 기능을 제공한다고 선언하는 역할을 한다. Comparable이 대표적인 예로, 클래스가 다른 객체와 순서를 비교할 수 있는 선택적 기능을 제공함을 나타낸다. 추상 클래스는 믹스인으로 사용될 수 없다.
    
3. **계층 구조 없는 타입 프레임워크를 만들 수 있다.**
    
    타입을 인터페이스로 정의하면 클래스들이 어떤 계층에도 속하지 않으면서도 동일한 인터페이스를 구현하여 같은 타입으로 취급될 수 있다. 이를 통해 강력한 유연성을 제공할 수 있다.
    
4. **디폴트 메서드를 통해 구현을 제공할 수 있다.**
    
    자바 8부터 인터페이스는 디폴트 메서드를 통해 구현을 제공할 수 있게 되었다. 인터페이스의 주요 장점(유연성)을 유지하면서 코드 재사용성을 높일 수 있다. 디폴트 메서드의 제약은 다음과 같다.
    
    - `equals`, `hashCode`는 재정의할 수 없다.
    - 인스턴스 필드를 가질 수 없다.
    - `public`이 아닌 정적 멤버를 가질 수 없다 (자바 9부터는 `private` 정적 메서드 가능).

---

### 3. 추상 골격 구현 (Skeletal Implementation) 클래스

인터페이스와 추상 클래스의 장점을 모두 취하는 패턴으로 **골격 구현 클래스**가 있다.

- 인터페이스로 타입을 정의하고, 필요하면 디폴트 메서드 몇 개도 함께 제공한다. 그리고 골격 구현 클래스는 나머지 메서드들까지 구현한다.
- 이렇게 구성하면 인터페이스를 직접 구현하는 복잡함을 줄여준다. 개발자는 단순히 골격 구현을 확장하는 것만으로 인터페이스의 모든 기능을 손쉽게 활용할 수 있다. **템플릿 메서드 패턴**이다.
- **예:** `AbstractCollection`, `AbstractSet`, `AbstractList`, `AbstractMap` 등

**골격 구현 클래스**

```java
public abstract class AbstractMapEntry<K,V>
    implements Map.Entry<K,V>
{
		// 변경 가능한 엔트리는 이 메서드를 반드시 재정의해야 함
    @Override public V setValue(V value) {
		    throw new UnsupportedOperationException();
    }
    
    // equals, hashCode 등을 구현
}
```

---

### 요약

- 다중 구현이 필요한 타입을 정의할 때는 **인터페이스가 가장 적합하다.**
- 복잡한 인터페이스라면 구현하는 수고를 덜어주는 **골격 구현(Skeletal Implementation) 클래스**를 함께 제공하는 것을 고려하라.
- 골격 구현은 **‘가능한 한’** 인터페이스의 디폴트 메서드로 제공하며 그 인터페이스르르 구현한 모든 곳에 활용하도록 하는것이 좋다.
